<h1>Projects</h1>

<div class="col-lg-12">

    <table class="table table-striped">
        <thead>
            <tr>
                <th>Title</th>
                <th>Creator</th>
                <th>Created</th>
                <th>Creator Email </th>
                <th colspan="3">
                    <% if policy(:Project).manager?%>
                        <%= link_to 'Create New Project', new_project_path, class: "btn btn-primary btn-sm" %>
                    <% end %>
                </th> 
            </tr>
        </thead>
    
        <tbody>
            <% @projects.each do |project| %>
                <tr>
                    <td>
                        <%= project.title %>
                    </td>
                    <td>
                        <%= project.user.name %>
                    </td>
                    <td>
                        <%= project.user.email %>
                    </td>
                    <td>
                        <%= project.created_at %>
                    </td>
                    <td>
                        <%= link_to 'Details', project, class: "btn btn-primary btn-sm"%>
                    </td>

                    <% if policy(project).manager?%>
                        <td>
                            <%= link_to 'Edit', edit_project_path(project), class: "btn btn-warning btn-sm" %>
                        </td>                    
                        <td>
                            <%= link_to 'Destroy', project, method: :delete, data: { confirm: 'Are you sure?' }, class: "btn btn-danger btn-sm" %>
                        </td>
                    <% end %>
                </tr>
                <% end %>
        </tbody>
    </table>

</div>

